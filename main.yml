- hosts:
    - all

  tasks:

    # --- Prepare hosts for the K8S cluster ---
    # Tags: install, configure, reset
    - import_role:
        name: common/docker_base
  
    # --- Manage the K8S cluster ---
    # Tags: install, configure, bootstrap_master, bootstrap_worker, reset
    - import_role:
        name: common/k8s_base
    
    # --- Manages the service mesh ---
    # Tags: apply, delete
    - import_role:
        name: common/k8s_mesh
      run_once: yes
      when:
        - k8s_base_node_type | default("") == "master"
